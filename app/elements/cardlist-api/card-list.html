<dom-module id="card-list">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>
    <div id="cards">
      <template is="dom-repeat" items="{{collection}}">
        <card-assignment color="{{getColor(user, item)}}" data="{{item}}" index="{{index}}" on-dropped="updateCollection"></card-assignment>
      </template>
    </div>
    <template is="dom-if" if="{{!collection.length}}" restamp="true">
      <span>You're done planning. Good job!</span>
    </template>
  </template>
  <script>
    Polymer({
      is: 'card-list',

      properties: {
        collection: {
          type: Array
        },
        name: {
          type: String
        },
        user: {
          type: Object
        }
      },

      updateCollection: function(event) {
        this.splice('collection', event.detail.index, 1);
      },

      getColor: function(user, data) {
        return user.colors[data.course.edition.courseId + ',' + data.course.edition.year];
      },

      /*
        TODO: This does not work with updateCollection for now.
      */
      sort: function(one, other) {
        return one.deadline > other.deadline;
      }
    });
  </script>
</dom-module>
